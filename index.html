<html>
    <head>
        <title>Neurohackademy 2019</title>
        <style>
            h1 {
                color:darkviolet;
                text-align: center;
            }
            p {
                margin: 20px;
                padding: 10px;
                background-color: aquamarine;
            }
            body {
                font-family: Arial, Helvetica, sans-serif;
                margin: 20px;
            }

            .bar {
              background-color: steelblue;
              color: white;
              padding: 2px;
              height: 25px;
              width: 100px;
              margin: 2px;
              text-align: left;
            }

            .bar:hover {
              background-color: darkred;
            }
        </style>
    </head>
    <body>
      <h1>Our first bar graph</h1>
      Now lets use D3.js instead!

      <div id="chart"></div>

      <button onclick="updateChart()">Update Chart</button>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.7/d3.min.js"></script>
      <script>
        // introducing javascript

        // in JS, we can manipulate HTML and CSS
        // all HTML elements are represented by the Document-Object-Model (DOM)
        // which is a massive datastructure that the browser uses to render a page.

        // using JS, we can manipulate the DOM

        // first, lets create an Array with our data and labels:

        var data = [20, 10, 50, 90, 80];
        var labels = ['a', 'b', 'c', 'd', 'e'];

        // next, lets create a new div element
        // lets use D3 to do this

        d3.select('#chart')
          .selectAll('.bar')
          .data(data) // bind data to the elements inside #chart with class bar
          .enter()
          .append('div') // if there is a mismatch between data and .bar elements, append a div
          .attr('class', 'bar') // set the class for those new divs as 'bar'
          // next lets dynamically set the width and label. If the second argument in the method call
          // is a function, D3 will pass us our data 1 at a time.
          .style('width', d => d + 'px') // this arrow notation is used for anonymous functions
          .text((d,i) => labels[i]) // with two variables, use parenthesis before the arrow


        function updateChart() {
          console.log('updating the chart!');
          for (var i=0; i<data.length; i += 1) {
            data[i] += (Math.random() - 0.5) * 20; // add or subtract some random number from data.
          }
          // just update the existing bars we created earlier.
          d3.select('#chart')
            .selectAll('.bar')
            .data(data) // bind data to the elements inside #chart with class bar
            // no need to .enter().append() because we know the bars exist
            .style('width', d => d + 'px') // this arrow notation is used for anonymous functions
            .text((d,i) => labels[i]) // with two variables, use parenthesis before the arrow
        }

      </script>
    </body>
</html>
